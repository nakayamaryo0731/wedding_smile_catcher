# 受け入れテスト フィードバック

受け入れテスト中に発見した改善点・バグをまとめる。

実施日: 2026-01-30

---

## フィードバック一覧

| # | カテゴリ | 内容 | 優先度 | 対応状況 |
|---|---------|------|--------|----------|
| 1 | 管理画面 | イベント作成後にQRコードモーダルが自動表示されるが不要 | - | ✅ 完了 |
| 2 | 管理画面 | ステータス変更の確認ダイアログの文言が「削除」になっている | - | ✅ 完了 |
| 3 | LINE Bot | 類似画像検出時のメッセージで「連写ではなく」が不要 | - | ✅ 完了 |
| 4 | ランキング画面 | 設定パネルからのデータ削除が権限不足で失敗 | 高 | ✅ 完了（短期対応） |
| 5 | LINE Bot | ユーザー登録時「フルネーム」と書いてあるが必須ではない | - | ✅ 完了 |

---

## 詳細

### 1. イベント作成後のQRコードモーダル自動表示

**現状**: イベント作成完了後、QRコードをコピーするモーダルが自動で表示される

**問題**: 不要

**対応**: `admin.js` の `showQRModal()` 呼び出しを削除

### 2. ステータス変更の確認ダイアログ文言

**現状**: ステータス変更時の確認ダイアログの文言が「削除」になっている

**問題**: ステータス変更なのに削除と表示されて紛らわしい

**対応**:
- `admin.html` にモーダルタイトル用の `id="confirmTitle"` を追加
- `admin.js` の `showConfirmModal()` でタイプに応じてタイトル・ボタン文言を変更

### 3. 類似画像検出時のメッセージ

**現状**: 「連写ではなく、違う構図で撮影してみましょう」

**問題**: 「連写ではなく」が不要

**対応**: `scoring/main.py` で「違う構図で撮影してみましょう！」に変更

### 4. ランキング画面からのデータ削除が失敗

**現状**: 設定パネルの「データを削除」で「Missing or insufficient permissions」エラー

**問題**: ランキング画面は認証なしのため、Firestore Security Rules でブロックされる

**対応（短期）**:
- `app.js` の `softDeleteEventData()` を変更
- 削除操作時に管理画面へ誘導するメッセージを表示

**対応（長期・未実装）**: Cloud Function で削除APIを作成

### 5. ユーザー登録時の「フルネーム」表記

**現状**: 「お名前（フルネーム）をテキストで送信してください」

**問題**: フルネーム必須ではない

**対応**: `webhook/main.py` で「お名前をテキストで送信してください」に変更（3箇所）

---

## 変更ファイル

- `src/frontend/js/admin.js`
- `src/frontend/admin.html`
- `src/frontend/js/app.js`
- `src/functions/webhook/main.py`
- `src/functions/scoring/main.py`
